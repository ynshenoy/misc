==============
Credential api
==============

It refers to ec2 credentials. This consists of two things. First is your access
and second is secret. Credential can be generated by Keystone using its
credential api. 

There are two broader class of apis which can be called to manage credential
for a user.

* OS-EC2 extensions

    + POST <Keystone_url>/v3/users/<user_id>/credentials/OS-EC2
    
      A curl request to create a credential with localhost as keystone url looks
      something like this.
    
      curl -X POST -H "X-Auth-Token: $TOKEN" http://localhost:5000/v3/users/<user_id>/credentials/OS-EC2 -d {"tenant_id": "<project_id>"}
    
    + GET <keystone_url>/v3/users/<user_id>/credentials/OS-EC2/<access>
    
      This gives you back the details of the credential which has access <access>
    
    + DELETE <keystone_url>/v3/users/<user_id>/credentials/OS-EC2/<access>
    
      This deletes the the credential with access <access>

* Generic credential api

  + POST <keystone_url>/v3/credentials

    An example of a curl request to create credential with this api can be found
    at:
    https://github.com/ajayaa/misc/blob/jiocloud/keystone/test/ec2_cred_adm1.sh

  + GET <keystone_url>v3/credentials/<credential_id>

  + DELETE <keystone_url>/v3/credentials/<credential_id>

  + GET <keystone_url>/v3/credentials -- List all the credentials.

Difference between these two sets of apis
=========================================

The generic credential api can be used to store ec2 credentials as well as
certificates for a particular user. If the generic api is used then the ec2
credentials have to generated by the user. But if the OS-EC2 extensions are
used then both the access and secret are generated by Keystone. Further more
the RBAC rules for generic credential api is not fine-grained enough to let
the domain_admins control credentials in their domains. So the generic
credential api is disabled in our environment. By disabled I mean only
cloud_admin can access these apis. The OS-EC2 extensions are exposed to the
customers individual users can control their own credentials. Even in the
OS-EC2 extensions domain_admins have no way to manage credentials in their
domains.
